/* =======================
   Polices
   ======================= */
@font-face {
  font-family: 'JungleRoar';
  src: local('Jungle Roar Regular'),
       url('Jungle Roar Regular.ttf') format('truetype');
  font-display: swap;
}

@font-face {
  font-family: 'MarketDeco';
  src: local('Market Deco'),
       url('Market_Deco.ttf') format('truetype');
  font-display: swap;
}

/* =======================
   Reset & fond
   ======================= */
* { box-sizing: border-box; }

body {
  margin: 0;
  padding: 0;
  font-family: 'MarketDeco', sans-serif; /* Texte global */
  color: #f0f0f0;
  background: #0e0a1f url("fond.jpg") no-repeat center center fixed;
  background-size: cover;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* =======================
   Écrans plein écran
   ======================= */
#intro-screen,
#video-screen,
#mic-screen,
#score-screen {
  position: fixed;
  inset: 0; /* top:0; right:0; bottom:0; left:0 */
  width: 100vw;
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;

  /* Transition d’apparition */
  opacity: 0;
  transition: opacity .4s ease;
  pointer-events: none; /* évite les clics quand caché */
}

#intro-screen.active,
#video-screen.active,
#mic-screen.active,
#score-screen.active {
  opacity: 1;
  pointer-events: auto;
}

/* Assure la bonne superposition des calques :
   intro > vidéo > micro > score (ajuste si tu veux) */
#intro-screen { z-index: 10; }
#video-screen { z-index: 20; position: relative; }  /* relative pour sous-titres/bouton */
#mic-screen   { z-index: 30; }
#score-screen { z-index: 40; }

/* =======================
   Titres animés
   ======================= */
h1, h2 {
  font-family: 'JungleRoar', sans-serif;
  font-size: 3em;
  margin: 0;
  padding: 0;
  color: #d7b3ff; /* mauve clair */
  text-shadow: 0 0 15px #6e44ff, 0 0 30px #1e0f3f;
  animation: glow 3s ease-in-out infinite alternate, fadeInScale 2s ease-out;
}

@keyframes glow {
  from { text-shadow: 0 0 10px #6e44ff, 0 0 20px #1e0f3f; }
  to   { text-shadow: 0 0 25px #b084ff, 0 0 40px #3f2b96; }
}

@keyframes fadeInScale {
  0%   { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}

/* =======================
   Boutons
   ======================= */
button {
  margin-top: 30px;
  background: linear-gradient(135deg, #6e44ff, #9b5de5, #3f2b96);
  border: none;
  color: white;
  font-size: 1.5em;
  padding: 0.8em 2em;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 0 15px rgba(155,93,229,0.7);
  transition: transform .2s ease, box-shadow .2s ease, opacity .2s ease;
  font-family: 'MarketDeco', sans-serif;
  letter-spacing: 2px;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(155,93,229,1), 0 0 40px rgba(62,0,172,0.9);
}

button:active {
  transform: scale(0.98);
}

button:focus-visible {
  outline: 3px solid #e5d4ff;
  outline-offset: 3px;
}

/* Bouton son si présent dans l'écran vidéo */
#sound-btn {
  position: absolute;
  bottom: 20px;
  right: 20px;
}

/* =======================
   Vidéo plein écran
   ======================= */
video {
  display: block;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  background: #000; /* évite flash blanc avant chargement */
}

/* Transition fluide vidéo */
#videoPlayer {
  transition: opacity 1s ease-in-out;
  opacity: 1;
}
#videoPlayer.fade-out { opacity: 0; }

/* =======================
   Sous-titres
   ======================= */
#subtitle {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 40px;
  width: 100%;
  padding: 0 .75rem;
  text-align: center;
  font-size: 2em;
  font-style: italic;
  color: #e5d4ff;
  text-shadow: 0 0 10px #3f2b96, 0 0 20px #6e44ff;
  animation: fadeIn 1s ease-in;
  font-family: 'MarketDeco', sans-serif;
  pointer-events: none;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* =======================
   Tableau score final
   ======================= */
#score-table {
  border-collapse: collapse;
  margin: 30px auto;
  min-width: 320px;
  width: min(90vw, 600px);
  font-size: 1.2em;
  background: rgba(30, 15, 63, 0.6);
  border: 2px solid #9b5de5;
  box-shadow: 0 0 20px rgba(110, 68, 255, 0.8);
  font-family: 'MarketDeco', sans-serif;
}

#score-table th,
#score-table td {
  border: 2px solid #6e44ff;
  padding: 12px 16px;
  text-align: center;
  text-shadow: 0 0 8px #9b5de5;
}

#score-table th {
  background: rgba(62, 0, 172, 0.6);
  color: #fff;
  font-weight: bold;
  box-shadow: inset 0 0 15px #9b5de5;
}

#score-table tr:nth-child(even) { background: rgba(255,255,255,0.05); }
#score-table tr:nth-child(odd)  { background: rgba(255,255,255,0.1); }

#score-table tr:hover {
  background: rgba(155,93,229,0.2);
  box-shadow: inset 0 0 15px #6e44ff;
  transform: scale(1.02);
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
}

/* =======================
   Écran micro
   ======================= */
#mic-screen {
  display: none; /* caché par défaut, activé via JS */
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: url("fond.jpg") no-repeat center center fixed;
  background-size: cover;
  color: #fff;
  text-align: center;
  animation: fadeIn 0.8s ease-in-out;
  /* flou assombri si dispo */
  backdrop-filter: brightness(0.6) blur(2px);
}
@supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
  #mic-screen {
    background-color: rgba(0,0,0,0.45); /* fallback si pas de backdrop-filter */
  }
}

.mic-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 1rem;
}

.mic-icon {
  width: min(500px, 60vw);
  height: auto; /* garde le ratio */
  filter: drop-shadow(0 0 20px #9b5de5);
  animation: pulse 1.5s infinite;
}

.mic-text {
  margin-top: 20px;
  font-size: clamp(1.2rem, 2.2vw, 2rem);
  color: #e5d4ff;
  text-shadow: 0 0 15px #6e44ff;
}

.mic-options {
  margin-top: 10px;
  font-size: clamp(1rem, 1.8vw, 1.3rem);
  color: #d7b3ff;
  text-shadow: 0 0 8px #3f2b96;
}

@keyframes pulse {
  0%   { transform: scale(1);   opacity: 0.8; }
  50%  { transform: scale(1.1); opacity: 1;   }
  100% { transform: scale(1);   opacity: 0.8; }
}

/* =======================
   Préférence utilisateur
   ======================= */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}
